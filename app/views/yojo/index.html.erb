<!-- Home Page-->   
<header class="masthead d-flex" >
  <div class="container text-center my-auto">
    <p class="mb-1 "> 우리집 셰프는 YOJO </p>
    <h1 class="mb-5" id=logo >YO<a id="yojo">RI</a>JO<a id="yojo">RI</a></h1>
    <a class="btn btn-primary btn-xl rounded-pill js-scroll-trigger" id="rounded" href="#search">재료 조합하러 가기</a>
  </div>
  <div class="overlay"></div>
</header>

<!-- Search Page-->
<div class="search-wrapper">
  <div class="types">
    <input type="radio" name="search type" onclick="switchSearch(this)" value=1 
    <% if @type == 1 %>
      checked
    <% end %>
    >재료 조합하기
    <input type="radio" name="search type" onclick="switchSearch(this)" value=2
    <% if @type == 2 %>
      checked
    <% end %>
    >요리 검색하기
    <input type="radio" name="search type" onclick="switchSearch(this)" value=3
    <% if @type == 3 %>
      checked
    <% end %>
    >아이디로 검색하기
  </div>
  <br>
  
  <form action="/" id="search" >
      <% if @type == 1 %>
          재료: 
          <input id="ingredient_search" class="bar" type="text">
          <button id="button" type="button" onclick="combine()">조합</button>
          
          <div id="ingredient_results"></div>
          
          <script>
            map.clear();
            new app.SearchIngredients;
            
            $("#ingredient_search").keydown(function(event) {
               if (event.keyCode == 13) {
                   event.preventDefault();
               }
            });
          </script>
      <% elsif @type == 2 %>
          요리:
          <input class="bar" type="text" name="yori" autocomplete="off" autofocus>
          <input type="submit" value="검색">
      <% else %>
          아이디:
          <input class="bar" type="text" name="id" autocomplete="off" autofocus>
          <input type="submit" value="검색">
      <% end %>
  </form>
  <div id="filters"></div>
</div>

<div class="sidenav">
  <a href<% if user_signed_in? %>='/yojo/kitchen'<% else %> onclick="guestWarning()" <% end %>
    data-toggle="tooltip" data-placement="right" title="마이키친 페이지" id="kitchen"><img class="icon" src="/assets/fridge.png"><p>마이키친</p></a><br>
  <a href<% if user_signed_in? %>='/yojo/yori_book/0'<% else %> onclick="guestWarning()" <% end %>
    data-toggle="tooltip" data-placement="right" title="요리북"><img class="icon" src="/assets/book.png"><p>요리북</p></a><br>
  <a href<% if user_signed_in? %>='/yojo/new_yori'<% else %> onclick="guestWarning()" <% end %>
    data-toggle="tooltip" data-placement="right" title="레시피 올리기"><img class="icon" src="/assets/edit.png"><p>레시피 올리기</p></a><br>
</div>
  
<div id="results">
    <% if @results != nil %>
        <% @count = 0 %>
        <% @results.each do |yori| %>
            <% if 4 % @count == 0 %>
              <div class="row" style="width: 98%; margin-left: 1em">
            <% end %>
                <div class="col-lg-3 col-md-4 col-sm-6 portfolio-item">
                  <div class="card h-100">
                    <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                    <div class="card-body">
                      <h4 class="card-title">
                        <a href="/yojo/yori/<%=yori.id%>"><%=yori.name%></a>
                      </h4>
                      <p class="card-text"><%=Post.find_by(yori_id: yori.id).main%></p>
                    </div>
                  </div>
                </div>
            <% if 4 % @count == 3 %>
              </div>
            <% end %>
            <% @count += 1 %>
        <% end %>
    <% end %>
</div>


<script>
    function combine() {
        console.log(map);
        var array = [];
        map.forEach(function(value, key) {
            array.push(value);
        });
        
        $.ajax({
            url : "/yojo/combine",
            type : "get",
            data : { data_value: array }
        });
    }
    
    function switchSearch(radio) {
        // can comment if we want to keep our filters
        if (radio.value != 1) {
            $("#filters span").remove();
        }
        
        $.ajax({
            url : "/yojo/switch",
            type : "get",
            data : { data_value: radio.value }
        });
    }
</script>

<!--Carousel test-->

<!--<div id="myCarousel" class="carousel slide" data-ride="carousel">-->
<!--  Indicators -->
<!--  <ol class="carousel-indicators">-->
<!--    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>-->
<!--    <li data-target="#myCarousel" data-slide-to="1"></li>-->
<!--    <li data-target="#myCarousel" data-slide-to="2"></li>-->
<!--  </ol>-->

<!--  Wrapper for slides -->
<!--  <div class="carousel-inner">-->
<!--    <div class="item active">-->
<!--      <img class="card-img-top" src="https://placehold.it/700x400" alt="">-->
<!--    </div>-->

<!--    <div class="item">-->
<!--      <img class="card-img-top" src="https://placehold.it/700x400" alt="">-->
<!--    </div>-->

<!--    <div class="item">-->
<!--      <img class="card-img-top" src="https://placehold.it/700x400" alt="">-->
<!--    </div>-->
<!--  </div>-->

<!--   Left and right controls -->
<!--  <a class="left carousel-control" href="#myCarousel" data-slide="prev">-->
<!--    <span class="glyphicon glyphicon-chevron-left"></span>-->
<!--    <span class="sr-only">Previous</span>-->
<!--  </a>-->
<!--  <a class="right carousel-control" href="#myCarousel" data-slide="next">-->
<!--    <span class="glyphicon glyphicon-chevron-right"></span>-->
<!--    <span class="sr-only">Next</span>-->
<!--  </a>-->
<!--</div>-->



<!--Script-->
<script src= "https://blackrockdigital.github.io/startbootstrap-stylish-portfolio/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src= "https://blackrockdigital.github.io/startbootstrap-stylish-portfolio/vendor/jquery-easing/jquery.easing.min.js"></script>
<script src= "https://blackrockdigital.github.io/startbootstrap-stylish-portfolio/js/stylish-portfolio.min.js"></script>

<!--Navbar Test-->
<script>
  window.onscroll = function() {myFunction()};
  
  var navbarl = document.getElementById("navbar");
  var sticky = navbar.offsetTop;
  
  function myFunction() {
    if (window.pageYOffset >= sticky) {
      navbarl.classList.add("sticky")
    } else {
      navbarl.classList.remove("sticky");
    }
  }
  
  function guestWarning() {
    alert("로그인 후 이용해주세요!")
  }
</script>